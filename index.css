
@import url('https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600&family=Merriweather:ital,wght@0,300;0,400;0,700;1,400&display=swap');

@tailwind base;
@tailwind components;
@tailwind utilities;

body {
  font-family: 'Inter', sans-serif;
  transition: background-color 0.5s ease, color 0.5s ease;
}

.font-serif-text {
  font-family: 'Merriweather', serif;
}

/* --------------------------- */

/* Custom scrollbar */
::-webkit-scrollbar {
  width: 6px;
}
::-webkit-scrollbar-track {
  background: transparent;
}
::-webkit-scrollbar-thumb {
  background: #cbd5e1;
  border-radius: 3px;
}
::-webkit-scrollbar-thumb:hover {
  background: #94a3b8;
}
.dark ::-webkit-scrollbar-thumb {
  background: #475569;
}
.dark ::-webkit-scrollbar-thumb:hover {
  background: #64748b;
}

/* Prevent touch scrolling for drawing canvas */
.touch-none {
  touch-action: none;
}

/* Shared Canvas Overlay Styling */
.graffiti-overlay {
    pointer-events: none;
    mix-blend-mode: normal; 
    /* Force full height */
    min-height: 100%;
}

.graffiti-layer {
    z-index: 10;
    pointer-events: none;
}

/* Base Animations */
@keyframes fadeIn {
  from { opacity: 0; }
  to { opacity: 1; }
}
@keyframes scaleIn {
  from { transform: scale(0.9); opacity: 0; }
  to { transform: scale(1); opacity: 1; }
}
@keyframes slideUp {
  from { transform: translateY(20px); opacity: 0; }
  to { transform: translateY(0); opacity: 1; }
}

.animate-fade-in {
  animation: fadeIn 0.8s ease-out forwards;
}
.animate-scale-in {
  animation: scaleIn 0.8s cubic-bezier(0.16, 1, 0.3, 1) forwards;
}
.animate-slide-up {
  animation: slideUp 0.8s ease-out 0.2s forwards;
  opacity: 0; 
}

/* Aurora & Splash */
@keyframes aurora {
  0% { background-position: 0% 50%; }
  50% { background-position: 100% 50%; }
  100% { background-position: 0% 50%; }
}
.animate-aurora {
  background-size: 300% 300%;
  animation: aurora 15s ease infinite;
}

@keyframes orbit-x {
  0% { transform: rotateZ(0deg) rotateX(65deg) rotateY(0deg); }
  100% { transform: rotateZ(360deg) rotateX(65deg) rotateY(0deg); }
}
@keyframes orbit-y {
  0% { transform: rotateZ(0deg) rotateX(0deg) rotateY(65deg); }
  100% { transform: rotateZ(360deg) rotateX(0deg) rotateY(65deg); }
}
@keyframes orbit-z {
  0% { transform: rotateZ(360deg) rotateX(45deg) rotateY(45deg); }
  100% { transform: rotateZ(0deg) rotateX(45deg) rotateY(45deg); }
}

.animate-orbit-x { animation: orbit-x 8s linear infinite; }
.animate-orbit-y { animation: orbit-y 12s linear infinite; }
.animate-orbit-z { animation: orbit-z 15s linear infinite; }

@keyframes letter-reveal {
  0% { opacity: 0; transform: translateY(20px) scale(0.8); filter: blur(8px); }
  100% { opacity: 1; transform: translateY(0) scale(1); filter: blur(0); }
}
.animate-letter-reveal {
  opacity: 0;
  display: inline-block;
  animation: letter-reveal 1s cubic-bezier(0.2, 0.9, 0.3, 1) forwards;
}

@keyframes tracking-expand {
  0% { letter-spacing: 0.1em; opacity: 0; }
  100% { letter-spacing: 0.4em; opacity: 0.8; }
}
.animate-tracking-expand {
  opacity: 0;
  animation: tracking-expand 1.5s ease-out 0.8s forwards;
}

@keyframes twinkle {
  0%, 100% { opacity: 0.2; transform: scale(0.5); }
  50% { opacity: 1; transform: scale(1.2); box-shadow: 0 0 8px rgba(255, 255, 255, 0.6); }
}
.animate-twinkle {
  animation: twinkle 3s ease-in-out infinite;
}

.perspective-1000 { perspective: 1000px; }
.preserve-3d { transform-style: preserve-3d; }

@keyframes cross-pulse {
  0% { filter: drop-shadow(0 0 10px rgba(255, 255, 255, 0.4)); transform: scale(1); opacity: 0.9; }
  50% { filter: drop-shadow(0 0 25px rgba(255, 215, 0, 0.8)); transform: scale(1.05); opacity: 1; }
  100% { filter: drop-shadow(0 0 10px rgba(255, 255, 255, 0.4)); transform: scale(1); opacity: 0.9; }
}
.animate-cross-pulse { animation: cross-pulse 4s ease-in-out infinite; }

@keyframes sheep-run {
  0% { left: -15%; }
  100% { left: 115%; }
}
.animate-sheep-run {
  position: absolute;
  animation: sheep-run 5s linear forwards;
}

@keyframes sheep-bounce {
  0%, 100% { transform: translateY(0) rotate(0deg); }
  25% { transform: translateY(-10px) rotate(-5deg); }
  50% { transform: translateY(0) rotate(0deg); }
  75% { transform: translateY(-5px) rotate(5deg); }
}
.animate-sheep-bounce {
  animation: sheep-bounce 0.6s infinite ease-in-out;
}

/* Winter Mode */
@keyframes snowfall {
  0% { transform: translateY(-10vh) translateX(0) rotate(0deg); opacity: 0; }
  10% { opacity: 1; }
  100% { transform: translateY(110vh) translateX(20px) rotate(360deg); opacity: 0; }
}
.animate-snow { animation: snowfall linear infinite; }

@keyframes light-glow {
  0%, 100% { opacity: 0.6; transform: scale(1); filter: brightness(1); box-shadow: 0 0 5px currentColor; }
  50% { opacity: 1; transform: scale(1.2); filter: brightness(1.5); box-shadow: 0 0 15px currentColor; }
}
.animate-light-glow { animation: light-glow 2.5s ease-in-out infinite; }

.frost-vignette {
  background: radial-gradient(circle at center, transparent 50%, rgba(255, 255, 255, 0.4) 100%);
  pointer-events: none;
}
.dark .frost-vignette {
  background: radial-gradient(circle at center, transparent 50%, rgba(199, 210, 254, 0.15) 100%);
}

/* ========================================= */
/* PRINCESS MODE OVERRIDES & ANIMATIONS      */
/* ========================================= */

@keyframes floatHeart {
  0% { 
    transform: translateY(0) scale(0.5); 
    opacity: 0; 
  }
  10% {
    opacity: 1;
  }
  100% { 
    transform: translateY(-120vh) scale(1.2) rotate(360deg); 
    opacity: 0; 
  }
}
.animate-float-heart {
  /* Ensure it actually moves from current position UPWARDS */
  animation: floatHeart linear infinite;
  will-change: transform, opacity;
}

/* --- PROFESSIONAL UNICORN ANIMATIONS --- */

/* Global Run Path (Left to Right) */
@keyframes unicorn-run-path {
  0% { left: -300px; }
  100% { left: 120%; }
}

.animate-unicorn-run {
  position: absolute;
  z-index: 50;
  animation-name: unicorn-run-path;
  animation-timing-function: linear;
  animation-fill-mode: forwards;
  will-change: left, transform;
}

/* 
   === STABLE GALLOP ANIMATIONS === 
   Slower cadence (0.65s) for a heavier, majestic feel
*/

/* 1. Body Rocking */
@keyframes u-gallop-body {
  0% { transform: translateY(0) rotate(0deg); }
  25% { transform: translateY(-12px) rotate(-2deg); } /* Leap */
  50% { transform: translateY(-8px) rotate(1deg); }
  75% { transform: translateY(0px) rotate(3deg); } /* Landing */
  100% { transform: translateY(0) rotate(0deg); }
}

/* 2. Head Bob */
@keyframes u-head-bob {
  0% { transform: rotate(0deg); }
  25% { transform: rotate(8deg); }  
  75% { transform: rotate(-4deg); } 
  100% { transform: rotate(0deg); }
}

/* 3. Shadow Scaling */
@keyframes u-shadow-scale {
  0%, 100% { transform: scale(1); opacity: 0.3; }
  25% { transform: scale(0.7); opacity: 0.15; } 
  75% { transform: scale(1.1); opacity: 0.4; } 
}

/* 4. LEG CYCLES */
/* Front Legs */
@keyframes u-leg-front {
  0% { transform: rotate(-20deg); }
  30% { transform: rotate(55deg); } /* Reach */
  60% { transform: rotate(15deg); } /* Pull */
  80% { transform: rotate(-30deg); } /* Tuck */
  100% { transform: rotate(-20deg); }
}

/* Back Legs */
@keyframes u-leg-back {
  0% { transform: rotate(15deg); }
  30% { transform: rotate(-45deg); } /* Tuck */
  60% { transform: rotate(25deg); } /* Extend/Push */
  100% { transform: rotate(15deg); }
}

/* 5. Hair & Tail Dynamics */
@keyframes u-hair-flow {
  0%, 100% { transform: rotate(0deg) skewX(0deg); }
  50% { transform: rotate(-8deg) skewX(5deg); } /* Gentle breeze */
}

@keyframes u-tail-swish {
  0% { transform: rotate(0deg); }
  25% { transform: rotate(-25deg); } 
  75% { transform: rotate(10deg); } 
  100% { transform: rotate(0deg); }
}

/* 6. Facial Expressions */
@keyframes u-blink {
  0%, 48%, 52%, 100% { transform: scaleY(1); }
  50% { transform: scaleY(0.1); }
}

@keyframes u-ear-twitch {
  0%, 80%, 100% { transform: rotate(0deg); }
  85% { transform: rotate(-15deg); }
  90% { transform: rotate(5deg); }
  95% { transform: rotate(0deg); }
}

/* Class Application - STRICT PIVOTS */
/* Using 0.65s duration for a slower, more majestic gallop */
.uni-body-group { 
    animation: u-gallop-body 0.65s linear infinite; 
    transform-origin: center center; 
    transform-box: fill-box;
}
.uni-head-anim { 
    animation: u-head-bob 0.65s ease-in-out infinite; 
    transform-origin: 0px 0px; 
}
.uni-shadow { 
    animation: u-shadow-scale 0.65s ease-in-out infinite; 
    transform-origin: center center; 
    transform-box: fill-box;
}

/* Legs - Rotate around their own top-left connection point (0,0) */
.uni-leg-fl-anim { animation: u-leg-front 0.65s linear infinite; animation-delay: 0.1s; transform-origin: 0px 0px; }
.uni-leg-fr-anim { animation: u-leg-front 0.65s linear infinite; transform-origin: 0px 0px; }
.uni-leg-bl-anim { animation: u-leg-back 0.65s linear infinite; animation-delay: 0.1s; transform-origin: 0px 0px; }
.uni-leg-br-anim { animation: u-leg-back 0.65s linear infinite; transform-origin: 0px 0px; }

/* Hair Animations - Slower wind cycle independent of gallop */
.uni-tail-anim { 
    animation: u-tail-swish 0.65s ease-in-out infinite; 
    transform-origin: 0px 0px;
}
.uni-hair-anim {
    animation: u-hair-flow 0.65s ease-in-out infinite;
    transform-origin: center bottom;
    transform-box: fill-box;
}

/* Facial */
.uni-eye-anim {
    animation: u-blink 4s infinite; /* Blinks every 4s */
    transform-origin: center center;
    transform-box: fill-box;
}
.uni-ear-anim {
    animation: u-ear-twitch 5s infinite; /* Twitches occasionally */
    transform-origin: bottom center;
    transform-box: fill-box;
}


/* SPARKLY AURORA */
@keyframes aurora-shift {
  0% { background-position: 0% 50%; opacity: 0.6; }
  50% { background-position: 100% 50%; opacity: 0.8; }
  100% { background-position: 0% 50%; opacity: 0.6; }
}
.animate-sparkly-aurora {
  /* Richer, more visible gradient */
  background: linear-gradient(270deg, rgba(236, 72, 153, 0.2), rgba(167, 139, 250, 0.2), rgba(251, 207, 232, 0.3), rgba(244, 114, 182, 0.2));
  background-size: 400% 400%;
  animation: aurora-shift 12s ease infinite;
}

/* --- PRINCESS MODE THEME OVERRIDES --- */
/* Using !important to brutally override default Slate themes */

/* 1. GLOBAL BACKGROUND - Soft White/Pink */
.princess-mode {
  background: linear-gradient(135deg, #fff1f2 0%, #fff 100%) !important;
  color: #881337 !important; /* Rose-900 Text */
}

/* 2. SIDEBAR - Pure White */
.princess-mode .bg-slate-900,
.princess-mode .bg-slate-950,
.princess-mode .bg-slate-800 {
    background-color: #ffffff !important; 
    border-color: #fbcfe8 !important; /* Pink-200 Border */
    color: #be123c !important; /* Rose-700 Text */
}

/* Sidebar Hover - Light Pink */
.princess-mode .hover\:bg-slate-800:hover,
.princess-mode .hover\:bg-slate-700:hover,
.princess-mode .group:hover .group-hover\:bg-slate-800\/50 {
    background-color: #fce7f3 !important; /* Pink-100 */
    color: #9d174d !important;
}

/* --- FIX: SIDEBAR ACTION BUTTONS (The Dark Background Issue) --- */

/* 1. Target the floating container specifically */
/* This selects the container holding the edit/delete buttons which usually has bg-slate-800/90 */
.princess-mode .group .absolute.bg-slate-800\/90 {
    background-color: rgba(255, 255, 255, 0.95) !important;
    border: 1px solid #fbcfe8 !important; /* Pink border */
    box-shadow: 0 2px 10px rgba(244, 114, 182, 0.2) !important;
}

/* 2. Target the buttons INSIDE that container */
.princess-mode .group .absolute button {
    color: #f472b6 !important; /* Pink-400 default */
    background-color: transparent !important;
}

/* 3. Target Hover States for those buttons */
.princess-mode .group .absolute button:hover {
    background-color: #fce7f3 !important; /* Pink-100 hover */
    color: #be123c !important; /* Rose-700 text hover */
}

/* 4. Fix specific "Delete" Confirmation Text */
.princess-mode .text-red-400 {
    color: #e11d48 !important; /* Rose-600 */
}

/* 5. Fix Cancel/Confirm buttons inside Delete Popup */
/* Often used .bg-slate-700 and .bg-red-600 */
.princess-mode .group .absolute .bg-slate-700 {
    background-color: #f3f4f6 !important;
    color: #64748b !important;
}
.princess-mode .group .absolute .bg-slate-700:hover {
    background-color: #e5e7eb !important;
}
.princess-mode .group .absolute .bg-red-600 {
    background-color: #f43f5e !important; /* Rose-500 */
}

/* ACTIVE CONVERSATION OUTLINE & BG */
/* Override dark ring and bg for active chat */
.princess-mode .ring-1.ring-slate-700 {
    --tw-ring-color: #f9a8d4 !important; /* Pink-300 ring */
    background-color: #fdf2f8 !important; /* Pink-50 bg */
    color: #831843 !important; /* Pink-900 text */
}

/* 3. BUTTONS */

/* "New Chat" -> Soft Pink Gradient */
.princess-mode .bg-indigo-600 {
    background: linear-gradient(90deg, #f472b6 0%, #e879f9 100%) !important; /* Pink-400 to Fuchsia-400 */
    box-shadow: 0 4px 15px rgba(244, 114, 182, 0.4) !important;
    color: white !important;
}

/* "Daily Verse" -> Pale Rose (NO YELLOW/GOLD) */
.princess-mode .bg-emerald-700,
.princess-mode .bg-emerald-700\/50 {
    background: linear-gradient(90deg, #fb7185 0%, #f43f5e 100%) !important; /* Rose-400 to Rose-500 */
    border-color: #fda4af !important;
    color: white !important;
}
/* Orange flame streak icon -> Pink */
.princess-mode .text-orange-400,
.princess-mode .fill-orange-400 {
    color: #f472b6 !important;
    fill: #f472b6 !important;
}
.princess-mode .text-orange-100 {
    color: #fff1f2 !important;
}

/* DELETE BUTTONS (Sidebar & Messages) */
/* Override generic slate hover text */
.princess-mode .hover\:text-red-500:hover {
    color: #e11d48 !important; /* Rose-600 */
    background-color: #ffe4e6 !important; /* Rose-100 */
}

/* Tabs (Chat, Bible, etc.) */
.princess-mode .bg-slate-700 {
    /* Active Tab */
    background-color: #f9a8d4 !important; /* Pink-300 */
    color: white !important;
}

/* 4. CHAT BUBBLES */

/* User Bubble -> Pink Gradient */
.princess-mode .bg-indigo-600.text-white {
    background: linear-gradient(135deg, #f472b6 0%, #db2777 100%) !important; /* Pink */
    border: none !important;
    color: white !important;
}

/* AI Bubble -> White with Pink Border */
.princess-mode .bg-white {
    background-color: #ffffff !important;
    border-color: #fbcfe8 !important; /* Pink-200 */
    color: #881337 !important; /* Rose-900 */
}

/* 5. INPUTS */
.princess-mode input, 
.princess-mode textarea {
    background-color: #ffffff !important;
    border-color: #fbcfe8 !important; /* Pink-200 */
    color: #be123c !important;
}

/* 6. ICONS (Lucide) */
.princess-mode .text-indigo-600,
.princess-mode .text-indigo-500,
.princess-mode .text-emerald-600,
.princess-mode .text-slate-400, /* Sidebar Icons */
.princess-mode .text-slate-500 {
    color: #db2777 !important; /* Pink-600 */
}
.princess-mode .bg-emerald-600 {
    background-color: #db2777 !important;
}

/* Scrollbar */
.princess-mode ::-webkit-scrollbar-thumb {
  background: #f9a8d4 !important; /* Pink-300 */
  border-radius: 10px;
}
